<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="docker-deployment">
  <meta name="description" content="docker-deployment">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>docker-deployment</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="/build/vendor.23ece49.css">
</head>
<body>
  <div id="root"><div class="md2html docs-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><img class="logo" src="/img/hlogo_colorful.svg"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><div><ul class="ant-menu blackClass ant-menu-light ant-menu-root ant-menu-horizontal" role="menu"><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-item-selected" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="/zh-cn/docs/latest/user_doc/quick-start.html" target="_self">文档</a><ul style="display:none"><li><a href="/zh-cn/docs/latest/user_doc/quick-start.html" target="_self">latest(1.3.5)</a></li><li><a href="/zh-cn/docs/1.3.5/user_doc/quick-start.html" target="_self">1.3.5</a></li><li><a href="/zh-cn/docs/1.3.4/user_doc/quick-start.html" target="_self">1.3.4</a></li><li><a href="/zh-cn/docs/1.3.3/user_doc/quick-start.html" target="_self">1.3.3</a></li><li><a href="/zh-cn/docs/1.3.2/user_doc/quick-start.html" target="_self">1.3.2</a></li><li><a href="/zh-cn/docs/1.3.1/user_doc/quick-start.html" target="_self">1.3.1</a></li><li><a href="/zh-cn/docs/1.2.1/user_doc/quick-start.html" target="_self">1.2.1</a></li><li><a href="/zh-cn/docs/1.2.0/user_doc/quick-start.html" target="_self">1.2.0</a></li><li><a href="https://analysys.github.io/easyscheduler_docs_cn/" target="_self">1.1.0(Not Apache Release)</a></li></ul></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/download/download.html" target="_self">下载</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/development/development-environment-setup.html" target="_self">开发者</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-item" role="menuitem"><a href="/zh-cn/community/index.html" target="_self">社区</a></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="display:none" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span class="submenu-title-wrapper"><a href="https://www.apache.org/" target="_blank">ASF</a><ul style="display:none"><li><a href="https://www.apache.org/" target="_blank">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank">License</a></li><li><a href="https://www.apache.org/events/current-event" target="_blank">Events</a></li><li><a href="https://www.apache.org/security/" target="_blank">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank">Thanks</a></li></ul></span><i class="ant-menu-submenu-arrow"></i></div></li><li class="ant-menu-submenu ant-menu-submenu-horizontal ant-menu-overflowed-submenu" style="visibility:hidden;position:absolute" role="menuitem"><div class="ant-menu-submenu-title" aria-expanded="false" aria-haspopup="true"><span>···</span><i class="ant-menu-submenu-arrow"></i></div></li></ul></div></div></div></header><div class="bar"><div class="bar-body"><img src="/img/system/docs.png" class="front-img"/><span>文档</span><img src="/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>部署文档</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/hardware-environment.html" target="_self">软硬件环境建议配置</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/standalone-deployment.html" target="_self">单机部署(Standalone)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/cluster-deployment.html" target="_self">集群部署(Cluster)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/docker-deployment.html" target="_self">Docker部署(Docker)</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/kubernetes-deployment.html" target="_self">Kubernetes部署(Kubernetes)</a></li></ul></li><li class="menu-item menu-item-level-1"><span>用户手册</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/quick-start.html" target="_self">快速上手</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/system-manual.html" target="_self">用户手册</a></li></ul></li><li class="menu-item menu-item-level-1"><span>架构设计</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/metadata-1.3.html" target="_self">元数据文档</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/architecture-design.html" target="_self">架构设计</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/configuration-file.html" target="_self">配置文件</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/task-structure.html" target="_self">任务结构</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/load-balance.html" target="_self">负载均衡</a></li></ul></li><li class="menu-item menu-item-level-1"><span>版本升级</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/upgrade.html" target="_self">升级</a></li></ul></li><li class="menu-item menu-item-level-1"><span>扩/缩容</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/latest/user_doc/expansion-reduction.html" target="_self">扩/缩容</a></li></ul></li><li class="menu-item menu-item-level-1"><span>FAQ</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/zh-cn/docs/release/faq.html" target="_self">FAQ</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h2>快速试用 Docker 部署</h2>
<p>有 2 种方式可以快速试用 DolphinScheduler，分别介绍</p>
<h3>一、以 docker-compose 的方式启动(推荐)</h3>
<p>这种方式需要先安装 <a href="https://docs.docker.com/compose/">docker-compose</a> , docker-compose 的安装网上已经有非常多的资料，请自行安装即可</p>
<h5>1、下载源码 zip 包</h5>
<ul>
<li>请下载最新版本的源码包并进行解压</li>
</ul>
<pre><code class="language-shell"><span class="hljs-meta">#</span><span class="bash"> 创建源码存放目录</span>
mkdir -p /opt/soft/dolphinscheduler;
cd /opt/soft/dolphinscheduler;
<span class="hljs-meta">
#</span><span class="bash"> 通过wget下载源码包</span>
wget https://mirrors.tuna.tsinghua.edu.cn/apache/incubator/dolphinscheduler/1.3.5/apache-dolphinscheduler-incubating-1.3.5-src.zip
<span class="hljs-meta">
#</span><span class="bash"> 通过curl下载源码包</span>
curl -O https://mirrors.tuna.tsinghua.edu.cn/apache/incubator/dolphinscheduler/1.3.5/apache-dolphinscheduler-incubating-1.3.5-src.zip
<span class="hljs-meta">
#</span><span class="bash"> 解压缩</span>
unzip apache-dolphinscheduler-incubating-1.3.5-src.zip

mv apache-dolphinscheduler-incubating-1.3.5-src-release dolphinscheduler-src
</code></pre>
<h5>2、安装并启动服务</h5>
<pre><code>cd dolphinscheduler-src/docker/docker-swarm
docker-compose up -d
</code></pre>
<h5>3、登录系统</h5>
<p>访问前端页面： <a href="http://192.168.xx.xx:12345/dolphinscheduler">http://192.168.xx.xx:12345/dolphinscheduler</a></p>
<p>默认的用户是<code>admin</code>，默认的密码是<code>dolphinscheduler123</code></p>
 <p align="center">
   <img src="/img/login.png" width="60%" />
 </p>
然后参考用户手册章节的`快速上手`即可进行使用
<h3>二、以 docker 方式启动</h3>
<p>这种方式需要先安装 <a href="https://docs.docker.com/engine/install/">docker</a>, docker 的安装网上已经有非常多的资料，请自行安装即可</p>
<h5>1、基础软件安装(请自行安装)</h5>
<ul>
<li>PostgreSQL (8.2.15+)</li>
<li>ZooKeeper (3.4.6+)</li>
<li>Docker</li>
</ul>
<h5>2、请登录 PostgreSQL 数据库，创建名为 <code>dolphinscheduler</code> 数据库</h5>
<h5>3、初始化数据库，导入 <code>sql/dolphinscheduler-postgre.sql</code> 进行创建表及基础数据导入</h5>
<h5>4、下载 DolphinScheduler 镜像</h5>
<p>我们已将面向用户的 DolphinScheduler 镜像上传至 docker 仓库，用户无需在本地构建镜像，直接执行以下命令从 docker 仓库 pull 镜像：</p>
<pre><code>docker pull apache/dolphinscheduler:latest
</code></pre>
<h5>5、运行一个 DolphinScheduler 实例</h5>
<p>如下:</p>
<pre><code>$ docker run -d --name dolphinscheduler \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-p 12345:12345 \
apache/dolphinscheduler:latest all
</code></pre>
<p>注：{username} 和 {password} 需要替换为具体的数据库用户名和密码，192.168.x.x 需要替换为 zookeeper 和 数据库的主机 IP</p>
<h5>6、登录系统</h5>
<p>默认的用户是<code>admin</code>，默认的密码是<code>dolphinscheduler123</code></p>
<p>访问前端页面： <a href="http://192.168.xx.xx:12345/dolphinscheduler">http://192.168.xx.xx:12345/dolphinscheduler</a></p>
 <p align="center">
   <img src="/img/login.png" width="60%" />
 </p>
然后参考用户手册章节的`快速上手`即可进行使用
<h2>附录</h2>
<h3>在容器启动时，会自动启动以下服务：</h3>
<pre><code>    MasterServer         ----- master服务
    WorkerServer         ----- worker服务
    LoggerServer         ----- logger服务
    ApiApplicationServer ----- api服务
    AlertServer          ----- alert服务
</code></pre>
<h3>如果你只是想运行 dolphinscheduler 中的部分服务</h3>
<p>你能够通执行以下指令仅运行dolphinscheduler中的部分服务</p>
<ul>
<li>创建一个 <strong>本地卷</strong> 用于资源存储，如下:</li>
</ul>
<pre><code>docker volume create dolphinscheduler-resource-local
</code></pre>
<ul>
<li>启动一个 <strong>master server</strong>, 如下:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-master \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
apache/dolphinscheduler:latest master-server
</code></pre>
<ul>
<li>启动一个 <strong>worker server</strong> (包括 <strong>logger server</strong>), 如下:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-worker \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-v dolphinscheduler-resource-local:/dolphinscheduler \
apache/dolphinscheduler:latest worker-server
</code></pre>
<ul>
<li>启动一个 <strong>api server</strong>, 如下:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-api \
-e ZOOKEEPER_QUORUM=&quot;192.168.x.x:2181&quot; \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
-v dolphinscheduler-resource-local:/dolphinscheduler \
-p 12345:12345 \
apache/dolphinscheduler:latest api-server
</code></pre>
<ul>
<li>启动一个 <strong>alert server</strong>, 如下:</li>
</ul>
<pre><code>$ docker run -d --name dolphinscheduler-alert \
-e DATABASE_HOST=&quot;192.168.x.x&quot; -e DATABASE_PORT=&quot;5432&quot; -e DATABASE_DATABASE=&quot;dolphinscheduler&quot; \
-e DATABASE_USERNAME=&quot;test&quot; -e DATABASE_PASSWORD=&quot;test&quot; \
apache/dolphinscheduler:latest alert-server
</code></pre>
<p><strong>注意</strong>: 当你运行dolphinscheduler中的部分服务时，你必须指定这些环境变量 <code>DATABASE_HOST</code> <code>DATABASE_PORT</code> <code>DATABASE_DATABASE</code> <code>DATABASE_USERNAME</code> <code>DATABASE_PASSWORD</code> <code>ZOOKEEPER_QUORUM</code>。</p>
<h2>环境变量</h2>
<p>DolphinScheduler Docker 容器通过环境变量进行配置，缺省时将会使用默认值。</p>
<p><strong><code>DATABASE_TYPE</code></strong></p>
<p>配置<code>database</code>的<code>TYPE</code>， 默认值 <code>postgresql</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_DRIVER</code></strong></p>
<p>配置<code>database</code>的<code>DRIVER</code>， 默认值 <code>org.postgresql.Driver</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_HOST</code></strong></p>
<p>配置<code>database</code>的<code>HOST</code>， 默认值 <code>127.0.0.1</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_PORT</code></strong></p>
<p>配置<code>database</code>的<code>PORT</code>， 默认值 <code>5432</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_USERNAME</code></strong></p>
<p>配置<code>database</code>的<code>USERNAME</code>， 默认值 <code>root</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_PASSWORD</code></strong></p>
<p>配置<code>database</code>的<code>PASSWORD</code>， 默认值 <code>root</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_DATABASE</code></strong></p>
<p>配置<code>database</code>的<code>DATABASE</code>， 默认值 <code>dolphinscheduler</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DATABASE_PARAMS</code></strong></p>
<p>配置<code>database</code>的<code>PARAMS</code>， 默认值 <code>characterEncoding=utf8</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>、<code>api-server</code>、<code>alert-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>DOLPHINSCHEDULER_ENV_PATH</code></strong></p>
<p>任务执行时的环境变量配置文件， 默认值 <code>/opt/dolphinscheduler/conf/env/dolphinscheduler_env.sh</code>。</p>
<p><strong><code>DOLPHINSCHEDULER_DATA_BASEDIR_PATH</code></strong></p>
<p>用户数据目录, 用户自己配置, 请确保这个目录存在并且用户读写权限， 默认值 <code>/tmp/dolphinscheduler</code>。</p>
<p><strong><code>RESOURCE_STORAGE_TYPE</code></strong></p>
<p>配置<code>dolphinscheduler</code>的资源存储类型，可选项为 <code>HDFS</code>、<code>S3</code>、<code>NONE</code>，默认值 <code>HDFS</code>。</p>
<p><strong><code>RESOURCE_UPLOAD_PATH</code></strong></p>
<p>配置<code>HDFS/S3</code>上的资源存储路径，默认值 <code>/dolphinscheduler</code>。</p>
<p><strong><code>FS_DEFAULT_FS</code></strong></p>
<p>配置资源存储的文件系统协议，如 <code>file:///</code>, <code>hdfs://mycluster:8020</code> or <code>s3a://dolphinscheduler</code>，默认值 <code>file:///</code>。</p>
<p><strong><code>FS_S3A_ENDPOINT</code></strong></p>
<p>当<code>RESOURCE_STORAGE_TYPE=S3</code>时，需要配置<code>S3</code>的访问路径，默认值 <code>s3.xxx.amazonaws.com</code>。</p>
<p><strong><code>FS_S3A_ACCESS_KEY</code></strong></p>
<p>当<code>RESOURCE_STORAGE_TYPE=S3</code>时，需要配置<code>S3</code>的<code>s3 access key</code>，默认值 <code>xxxxxxx</code>。</p>
<p><strong><code>FS_S3A_SECRET_KEY</code></strong></p>
<p>当<code>RESOURCE_STORAGE_TYPE=S3</code>时，需要配置<code>S3</code>的<code>s3 secret key</code>，默认值 <code>xxxxxxx</code>。</p>
<p><strong><code>ZOOKEEPER_QUORUM</code></strong></p>
<p>配置<code>master-server</code>和<code>worker-serverr</code>的<code>Zookeeper</code>地址, 默认值 <code>127.0.0.1:2181</code>。</p>
<p><strong>注意</strong>: 当运行<code>dolphinscheduler</code>中<code>master-server</code>、<code>worker-server</code>这些服务时，必须指定这个环境变量，以便于你更好的搭建分布式服务。</p>
<p><strong><code>ZOOKEEPER_ROOT</code></strong></p>
<p>配置<code>dolphinscheduler</code>在<code>zookeeper</code>中数据存储的根目录，默认值 <code>/dolphinscheduler</code>。</p>
<p><strong><code>MASTER_EXEC_THREADS</code></strong></p>
<p>配置<code>master-server</code>中的执行线程数量，默认值 <code>100</code>。</p>
<p><strong><code>MASTER_EXEC_TASK_NUM</code></strong></p>
<p>配置<code>master-server</code>中的执行任务数量，默认值 <code>20</code>。</p>
<p><strong><code>MASTER_HEARTBEAT_INTERVAL</code></strong></p>
<p>配置<code>master-server</code>中的心跳交互时间，默认值 <code>10</code>。</p>
<p><strong><code>MASTER_TASK_COMMIT_RETRYTIMES</code></strong></p>
<p>配置<code>master-server</code>中的任务提交重试次数，默认值 <code>5</code>。</p>
<p><strong><code>MASTER_TASK_COMMIT_INTERVAL</code></strong></p>
<p>配置<code>master-server</code>中的任务提交交互时间，默认值 <code>1000</code>。</p>
<p><strong><code>MASTER_MAX_CPULOAD_AVG</code></strong></p>
<p>配置<code>master-server</code>中的CPU中的<code>load average</code>值，默认值 <code>100</code>。</p>
<p><strong><code>MASTER_RESERVED_MEMORY</code></strong></p>
<p>配置<code>master-server</code>的保留内存，默认值 <code>0.1</code>。</p>
<p><strong><code>MASTER_LISTEN_PORT</code></strong></p>
<p>配置<code>master-server</code>的端口，默认值 <code>5678</code>。</p>
<p><strong><code>WORKER_EXEC_THREADS</code></strong></p>
<p>配置<code>worker-server</code>中的执行线程数量，默认值 <code>100</code>。</p>
<p><strong><code>WORKER_HEARTBEAT_INTERVAL</code></strong></p>
<p>配置<code>worker-server</code>中的心跳交互时间，默认值 <code>10</code>。</p>
<p><strong><code>WORKER_MAX_CPULOAD_AVG</code></strong></p>
<p>配置<code>worker-server</code>中的CPU中的最大<code>load average</code>值，默认值 <code>100</code>。</p>
<p><strong><code>WORKER_RESERVED_MEMORY</code></strong></p>
<p>配置<code>worker-server</code>的保留内存，默认值 <code>0.1</code>。</p>
<p><strong><code>WORKER_LISTEN_PORT</code></strong></p>
<p>配置<code>worker-server</code>的端口，默认值 <code>1234</code>。</p>
<p><strong><code>WORKER_GROUP</code></strong></p>
<p>配置<code>worker-server</code>的分组，默认值 <code>default</code>。</p>
<p><strong><code>XLS_FILE_PATH</code></strong></p>
<p>配置<code>alert-server</code>的<code>XLS</code>文件的存储路径，默认值 <code>/tmp/xls</code>。</p>
<p><strong><code>MAIL_SERVER_HOST</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务地址，默认值 <code>空</code>。</p>
<p><strong><code>MAIL_SERVER_PORT</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务端口，默认值 <code>空</code>。</p>
<p><strong><code>MAIL_SENDER</code></strong></p>
<p>配置<code>alert-server</code>的邮件发送人，默认值 <code>空</code>。</p>
<p><strong><code>MAIL_USER=</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务用户名，默认值 <code>空</code>。</p>
<p><strong><code>MAIL_PASSWD</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务用户密码，默认值 <code>空</code>。</p>
<p><strong><code>MAIL_SMTP_STARTTLS_ENABLE</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务是否启用TLS，默认值 <code>true</code>。</p>
<p><strong><code>MAIL_SMTP_SSL_ENABLE</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务是否启用SSL，默认值 <code>false</code>。</p>
<p><strong><code>MAIL_SMTP_SSL_TRUST</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务SSL的信任地址，默认值 <code>空</code>。</p>
<p><strong><code>ENTERPRISE_WECHAT_ENABLE</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务是否启用企业微信，默认值 <code>false</code>。</p>
<p><strong><code>ENTERPRISE_WECHAT_CORP_ID</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务企业微信<code>ID</code>，默认值 <code>空</code>。</p>
<p><strong><code>ENTERPRISE_WECHAT_SECRET</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务企业微信<code>SECRET</code>，默认值 <code>空</code>。</p>
<p><strong><code>ENTERPRISE_WECHAT_AGENT_ID</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务企业微信<code>AGENT_ID</code>，默认值 <code>空</code>。</p>
<p><strong><code>ENTERPRISE_WECHAT_USERS</code></strong></p>
<p>配置<code>alert-server</code>的邮件服务企业微信<code>USERS</code>，默认值 <code>空</code>。</p>
<h2>FAQ</h2>
<h3>如何通过 docker-compose 停止 dolphinscheduler？</h3>
<p>停止所有容器:</p>
<pre><code>docker-compose stop
</code></pre>
<p>停止所有容器并移除所有容器，网络和存储卷:</p>
<pre><code>docker-compose down -v
</code></pre>
<h3>如何在 Docker Swarm 上部署 dolphinscheduler？</h3>
<p>假设 Docker Swarm 集群已经部署（如果还没有创建 Docker Swarm 集群，请参考 <a href="https://docs.docker.com/engine/swarm/swarm-tutorial/create-swarm/">create-swarm</a>）</p>
<p>启动名为 dolphinscheduler 的 stack</p>
<pre><code>docker stack deploy -c docker-stack.yml dolphinscheduler
</code></pre>
<p>启动并移除名为 dolphinscheduler 的 stack</p>
<pre><code>docker stack rm dolphinscheduler
</code></pre>
<h3>如何用 MySQL 替代 PostgreSQL 作为 DolphinScheduler 的数据库？</h3>
<blockquote>
<p>由于商业许可证的原因，我们不能直接使用 MySQL 的驱动包和客户端.</p>
<p>如果你要使用 MySQL, 你可以基于官方镜像 <code>apache/dolphinscheduler</code> 进行构建.</p>
</blockquote>
<ol>
<li>
<p>下载 MySQL 驱动包 <a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.49/mysql-connector-java-5.1.49.jar">mysql-connector-java-5.1.49.jar</a> (要求 <code>&gt;=5.1.47</code>)</p>
</li>
<li>
<p>创建一个新的 <code>Dockerfile</code>，用于添加 MySQL 的驱动包和客户端:</p>
</li>
</ol>
<pre><code>FROM apache/dolphinscheduler:latest
COPY mysql-connector-java-5.1.49.jar /opt/dolphinscheduler/lib
RUN apk add --update --no-cache mysql-client
</code></pre>
<ol start="3">
<li>构建一个包含 MySQL 的驱动包和客户端的新镜像:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:mysql .
</code></pre>
<ol start="4">
<li>修改 <code>docker-compose.yml</code> 文件中的所有 image 字段为 <code>apache/dolphinscheduler:mysql</code></li>
</ol>
<blockquote>
<p>如果你想在 Docker Swarm 上部署 dolphinscheduler，你需要修改 <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>注释 <code>docker-compose.yml</code> 文件中的 <code>dolphinscheduler-postgresql</code> 块</p>
</li>
<li>
<p>在 <code>docker-compose.yml</code> 文件中添加 <code>dolphinscheduler-mysql</code> 服务（<strong>可选</strong>，你可以直接使用一个外部的 MySQL 数据库）</p>
</li>
<li>
<p>修改 <code>docker-compose.yml</code> 文件中的所有 DATABASE 环境变量</p>
</li>
</ol>
<pre><code>DATABASE_TYPE: mysql
DATABASE_DRIVER: com.mysql.jdbc.Driver
DATABASE_HOST: dolphinscheduler-mysql
DATABASE_PORT: 3306
DATABASE_USERNAME: root
DATABASE_PASSWORD: root
DATABASE_DATABASE: dolphinscheduler
DATABASE_PARAMS: useUnicode=true&amp;characterEncoding=UTF-8
</code></pre>
<blockquote>
<p>如果你已经添加了 <code>dolphinscheduler-mysql</code> 服务，设置 <code>DATABASE_HOST</code> 为 <code>dolphinscheduler-mysql</code> 即可</p>
</blockquote>
<ol start="8">
<li>运行 dolphinscheduler (详见<strong>如何使用docker镜像</strong>)</li>
</ol>
<h3>如何在数据源中心支持 MySQL 数据源？</h3>
<blockquote>
<p>由于商业许可证的原因，我们不能直接使用 MySQL 的驱动包.</p>
<p>如果你要添加 MySQL 数据源, 你可以基于官方镜像 <code>apache/dolphinscheduler</code> 进行构建.</p>
</blockquote>
<ol>
<li>
<p>下载 MySQL 驱动包 <a href="https://repo1.maven.org/maven2/mysql/mysql-connector-java/5.1.49/mysql-connector-java-5.1.49.jar">mysql-connector-java-5.1.49.jar</a> (要求 <code>&gt;=5.1.47</code>)</p>
</li>
<li>
<p>创建一个新的 <code>Dockerfile</code>，用于添加 MySQL 驱动包:</p>
</li>
</ol>
<pre><code>FROM apache/dolphinscheduler:latest
COPY mysql-connector-java-5.1.49.jar /opt/dolphinscheduler/lib
</code></pre>
<ol start="3">
<li>构建一个包含 MySQL 驱动包的新镜像:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:mysql-driver .
</code></pre>
<ol start="4">
<li>将 <code>docker-compose.yml</code> 文件中的所有 image 字段 修改为 <code>apache/dolphinscheduler:mysql-driver</code></li>
</ol>
<blockquote>
<p>如果你想在 Docker Swarm 上部署 dolphinscheduler，你需要修改 <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>运行 dolphinscheduler (详见<strong>如何使用docker镜像</strong>)</p>
</li>
<li>
<p>在数据源中心添加一个 MySQL 数据源</p>
</li>
</ol>
<h3>如何在数据源中心支持 Oracle 数据源？</h3>
<blockquote>
<p>由于商业许可证的原因，我们不能直接使用 Oracle 的驱动包.</p>
<p>如果你要添加 Oracle 数据源, 你可以基于官方镜像 <code>apache/dolphinscheduler</code> 进行构建.</p>
</blockquote>
<ol>
<li>
<p>下载 Oracle 驱动包 <a href="https://repo1.maven.org/maven2/com/oracle/database/jdbc/ojdbc8/">ojdbc8.jar</a> (such as <code>ojdbc8-19.9.0.0.jar</code>)</p>
</li>
<li>
<p>创建一个新的 <code>Dockerfile</code>，用于添加 Oracle 驱动包:</p>
</li>
</ol>
<pre><code>FROM apache/dolphinscheduler:latest
COPY ojdbc8-19.9.0.0.jar /opt/dolphinscheduler/lib
</code></pre>
<ol start="3">
<li>构建一个包含 Oracle 驱动包的新镜像:</li>
</ol>
<pre><code>docker build -t apache/dolphinscheduler:oracle-driver .
</code></pre>
<ol start="4">
<li>将 <code>docker-compose.yml</code> 文件中的所有 image 字段 修改为 <code>apache/dolphinscheduler:oracle-driver</code></li>
</ol>
<blockquote>
<p>如果你想在 Docker Swarm 上部署 dolphinscheduler，你需要修改 <code>docker-stack.yml</code></p>
</blockquote>
<ol start="5">
<li>
<p>运行 dolphinscheduler (详见<strong>如何使用docker镜像</strong>)</p>
</li>
<li>
<p>在数据源中心添加一个 Oracle 数据源</p>
</li>
</ol>
<p>更多信息请查看 <a href="https://github.com/apache/incubator-dolphinscheduler.git">incubator-dolphinscheduler</a> 文档.</p>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/ds_gray.svg"/><div class="cols-container"><div class="col col-12"><h3>Disclaimer</h3><p>Apache DolphinScheduler is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Apache Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/zh-cn/development/architecture-design.html" target="_self">概览</a></dd><dd><a href="/zh-cn/docs/latest/user_doc/quick-start.html" target="_self">快速开始</a></dd><dd><a href="/zh-cn/development/backend-development.html" target="_self">开发者指南</a></dd></dl></div><div class="col col-6"><dl><dt>ASF</dt><dd><a href="http://www.apache.org" target="_self">基金会</a></dd><dd><a href="http://www.apache.org/licenses/" target="_self">证书</a></dd><dd><a href="http://www.apache.org/events/current-event" target="_self">事件</a></dd><dd><a href="http://www.apache.org/foundation/sponsorship.html" target="_self">赞助</a></dd><dd><a href="http://www.apache.org/foundation/thanks.html" target="_self">致谢</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2019-2021 The Apache Software Foundation. Apache DolphinScheduler, DolphinScheduler, and its feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
  <script src="//cdn.jsdelivr.net/npm/react@15.6.2/dist/react-with-addons.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/react-dom@15.6.2/dist/react-dom.min.js"></script>
  <script>window.rootPath = '';</script>
  <script src="/build/vendor.fce9f07.js"></script>
  <script src="/build/docs.md.d75c507.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?4e7b4b400dd31fa015018a435c64d06f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</body>
</html>